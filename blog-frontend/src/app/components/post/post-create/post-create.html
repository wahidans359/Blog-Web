<app-navbar/>
<div class="create-post-container">
  <div class="create-post-card">
    <h1>Create New Post</h1>
    
    @if (error) {
      <div class="error-message">{{ error }}</div>
    }

    <form #postForm="ngForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="title">Title</label>
        <input
          type="text"
          id="title"
          name="title"
          [(ngModel)]="formData.title"
          required
          #title="ngModel"
          placeholder="Enter post title"
        >
        @if (title.invalid && (title.dirty || title.touched)) {
          <div class="error-message">Title is required</div>
        }
      </div>

      <div class="form-group">
        <label for="content">Content</label>
        <textarea
          id="content"
          name="content"
          [(ngModel)]="formData.content"
          required
          #content="ngModel"
          rows="6"
          placeholder="Write your post content here"
        ></textarea>
        @if (content.invalid && (content.dirty || content.touched)) {
          <div class="error-message">Content is required</div>
        }
      </div>

      <div class="form-actions">
        <button
          type="submit"
          [disabled]="postForm.invalid || isSubmitting"
          class="submit-btn"
        >
          @if (isSubmitting) {
            <span class="spinner"></span>
          } @else {
            Publish Post
          }
        </button>
      </div>
    </form>
  </div>
</div>